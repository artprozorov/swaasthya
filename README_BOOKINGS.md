# Календарь бронирования - Инструкция по использованию

## Описание

HTML-страница для отображения данных бронирования из Google Sheets с возможностью:
- Просмотра занятости комнат по дням
- Фильтрации по неделям или месяцам
- Отправки заявок на бронирование по email

## Настройка

### JSON API уже настроен

Страница настроена на работу с JSON API через Google Apps Script. URL API указан в файле `bookings.html`:

```javascript
const JSON_API_URL = 'https://script.googleusercontent.com/macros/echo?...';
```

**Никакой дополнительной настройки не требуется** - просто откройте файл `bookings.html` в браузере.

### Формат данных

API возвращает JSON массив объектов следующего формата:

```json
[
  {
    "DATE": "2025-12-31T21:00:00.000Z",
    "ROOM 1": true,
    "ROOM 2": "",
    "ROOM 3": "",
    "ROOM 4": true,
    ...
  }
]
```

- **DATE**: Дата в формате ISO (UTC)
- **Комнаты**: `true` - комната занята, пустая строка `""` - комната свободна

### Если нужно изменить URL API

Если у вас другой URL для JSON API, откройте файл `bookings.html` и замените значение константы `JSON_API_URL` в начале JavaScript кода.

## Особенности работы с данными

- **Обезличивание**: В календаре отображается только статус "Занято" или "Свободно", без персональных данных клиентов
- **Автоматическое обновление**: Данные загружаются при открытии страницы
- **Формат дат**: Даты приходят в ISO формате и автоматически конвертируются для отображения

## Использование

1. Откройте файл `bookings.html` в веб-браузере
2. Данные автоматически загрузятся из Google Sheets
3. Используйте кнопки навигации для просмотра разных периодов
4. Переключайтесь между видом "Неделя" и "Месяц"
5. Нажмите "Забронировать" для отправки заявки по email

## Особенности

- **Обезличивание данных**: В календаре отображается только статус "Занято" или "Свободно", без персональных данных
- **Адаптивный дизайн**: Страница корректно отображается на мобильных устройствах
- **Email заявки**: Форма создает mailto-ссылку, которая откроет почтовый клиент пользователя

## Устранение неполадок

### Данные не загружаются

1. Проверьте подключение к интернету
2. Проверьте URL API в коде - убедитесь, что он корректный
3. Откройте консоль браузера (F12) для просмотра ошибок
4. Попробуйте открыть URL API напрямую в браузере - должен отображаться JSON массив

### Ошибка "HTTP ошибка"

- Убедитесь, что Google Apps Script развернут и доступен публично
- Проверьте, что скрипт возвращает корректный JSON

### Неправильное отображение дат или комнат

- Проверьте формат данных в JSON API
- Убедитесь, что поле `DATE` содержит валидные ISO даты
- Проверьте, что значения комнат - это либо `true`, либо пустая строка `""`

### Комнаты не отображаются

- Убедитесь, что в JSON есть данные
- Проверьте названия полей (комнаты должны быть ключами объектов, кроме `DATE`)

## Безопасность

⚠️ **Важно**: Текущая реализация показывает только статус занятости комнат (занято/свободно), без персональных данных клиентов.

Для дополнительной защиты:
- Ограничьте доступ к HTML-файлу (разместите на защищенном сервере)
- Настройте CORS политику в Google Apps Script
- Реализуйте аутентификацию, если нужен доступ только авторизованным пользователям

## Дополнительные улучшения

Для production-использования рекомендуется:
1. Добавить серверную часть для обработки заявок
2. Реализовать реальную отправку email через сервер (SMTP, SendGrid, и т.д.)
3. Добавить аутентификацию пользователей
4. Кэшировать данные для уменьшения нагрузки на Google Sheets API
5. Добавить возможность редактирования бронирований (при наличии прав доступа)

